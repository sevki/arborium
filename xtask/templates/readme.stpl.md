# <%= crate_name %>

[![Part of Arborium](https://img.shields.io/badge/ðŸŒ³_Arborium-grammar_collection-228B22)](https://github.com/bearcove/arborium)
[![crates.io](https://img.shields.io/crates/v/<%= crate_name %>.svg)](https://crates.io/crates/<%= crate_name %>)
[![docs.rs](https://img.shields.io/docsrs/<%= crate_name %>)](https://docs.rs/<%= crate_name %>)
[![license](https://img.shields.io/crates/l/<%= crate_name %>.svg)](https://github.com/bearcove/arborium)

[<%= grammar_name %>](<%= language_link %>) grammar for [tree-sitter](https://tree-sitter.github.io/).
<% if !description.is_empty() { %>
> <%- description %>
<% } %>
<% if !inventor.is_empty() || year > 0 { %>
| | |
|---|---|<% if !inventor.is_empty() { %>
| **Inventor** | <%= inventor %> |<% } %><% if year > 0 { %>
| **Year** | <%= year %> |<% } %>
<% } %>
## Usage

```rust
use <%= crate_name_snake %>::language;
use tree_sitter_patched_arborium::Parser;

let mut parser = Parser::new();
parser.set_language(&language()).expect("Error loading <%= grammar_id %> grammar");

let source_code = "/* your <%= grammar_id %> code here */";
let tree = parser.parse(source_code, None).unwrap();
println!("{}", tree.root_node().to_sexp());
```

For most use cases, prefer the main [arborium](https://crates.io/crates/arborium) crate:

```toml
[dependencies]
arborium = { version = "*", features = ["<%= grammar_id %>"] }
```

Or use this crate directly:

```toml
[dependencies]
<%= crate_name %> = "*"
```

## About Arborium

This crate is part of [**Arborium**](https://github.com/bearcove/arborium), a collection of tree-sitter grammars packaged as Rust crates, maintained by [Amos Wenger](https://fasterthanli.me).

This crate packages a `parser.c` file generated by the [tree-sitter CLI](https://tree-sitter.github.io/tree-sitter/creating-parsers#generating-the-parser). It exports a `language()` function returning the tree-sitter `Language` for **<%= grammar_id %>**.

**Why separate crates?** Tree-sitter parsers can be large (some exceed 1MB of generated C). Splitting languages into separate crates means you only compile what you need, and parallel/incremental builds are more effective.

## Build Requirements

- **Rust**: MSRV is 1.85.0 (Rust 2024 edition)
- **C compiler**: This crate compiles C code via the [`cc`](https://crates.io/crates/cc) crate

### Supported Targets

- All major platforms: Linux, macOS, Windows
- WebAssembly: `wasm32-unknown-unknown` (with custom sysroot)

## Upstream Grammar

| | |
|---|---|
| **Repository** | [<%= upstream_repo %>](<%= upstream_url %>) |
| **Commit** | `<%= commit %>` |
| **License** | <%= license %> |

To regenerate after upstream updates:

```sh
cargo xtask gen --name <%= grammar_id %>
```

**Found a grammar bug?** Please report it to the [upstream repository](<%= upstream_url %>/issues).

## Safety

This crate uses `unsafe` for FFI bindings to the tree-sitter C library. The unsafe surface is minimal and limited to what tree-sitter requires. The generated parser code is produced by tree-sitter's own code generator.

## Versioning

Crate versions track Arborium releases, not upstream grammar versions. The upstream commit is recorded above. A major version bump occurs when grammar changes affect node names or structure (breaking for query consumers).

## License

- **Generated parser code** (`parser.c`): **<%= license %>** (from upstream grammar)
- **Arborium glue code**: **MIT OR Apache-2.0**

## Contributing

- Issues: [github.com/bearcove/arborium/issues](https://github.com/bearcove/arborium/issues)
- Repository: [github.com/bearcove/arborium](https://github.com/bearcove/arborium)
